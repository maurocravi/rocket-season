---
const targetDate = new Date("2026-03-11T00:00:00Z").getTime();
---

<div
    id="countdown-container"
    class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center mt-10"
>
    <div class="glass-panel p-6 flex flex-col items-center justify-center">
        <span
            id="days"
            class="text-4xl md:text-6xl font-display font-bold text-white neon-text-blue"
            >00</span
        >
        <span
            class="text-sm md:text-base uppercase tracking-widest text-slate-400 mt-2"
            >Days</span
        >
    </div>
    <div class="glass-panel p-6 flex flex-col items-center justify-center">
        <span
            id="hours"
            class="text-4xl md:text-6xl font-display font-bold text-white neon-text-blue"
            >00</span
        >
        <span
            class="text-sm md:text-base uppercase tracking-widest text-slate-400 mt-2"
            >Hours</span
        >
    </div>
    <div class="glass-panel p-6 flex flex-col items-center justify-center">
        <span
            id="minutes"
            class="text-4xl md:text-6xl font-display font-bold text-white neon-text-blue"
            >00</span
        >
        <span
            class="text-sm md:text-base uppercase tracking-widest text-slate-400 mt-2"
            >Minutes</span
        >
    </div>
    <div class="glass-panel p-6 flex flex-col items-center justify-center">
        <span
            id="seconds"
            class="text-4xl md:text-6xl font-display font-bold text-white neon-text-orange"
            >00</span
        >
        <span
            class="text-sm md:text-base uppercase tracking-widest text-slate-400 mt-2"
            >Seconds</span
        >
    </div>
</div>

<script define:vars={{ targetDate }}>
    function updateCountdown() {
        const now = new Date().getTime();
        const distance = targetDate - now;

        if (distance < 0) {
            document.getElementById("countdown-container").innerHTML =
                '<div class="col-span-4 text-2xl text-white font-display">SEASON ENDED</div>';
            return;
        }

        const days = Math.floor(distance / (1000 * 60 * 60 * 24));
        const hours = Math.floor(
            (distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60),
        );
        const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((distance % (1000 * 60)) / 1000);

        const formatNumber = (num) => {
            return String(num)
                .padStart(2, "0")
                .split("")
                .map(
                    (digit) =>
                        `<span class="inline-block w-[1.1ch] text-center">${digit}</span>`,
                )
                .join("");
        };

        document.getElementById("days").innerHTML = formatNumber(days);
        document.getElementById("hours").innerHTML = formatNumber(hours);
        document.getElementById("minutes").innerHTML = formatNumber(minutes);
        document.getElementById("seconds").innerHTML = formatNumber(seconds);
    }

    setInterval(updateCountdown, 1000);
    updateCountdown();
</script>
